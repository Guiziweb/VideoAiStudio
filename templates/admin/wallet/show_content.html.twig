{% set resource = hookable_metadata.context.resource %}
{% set transactions = resource.transactions %}

{{ component('wallet_transaction_chart', { wallet: resource }) }}

<div class="card">
    <div class="card-header">
        <h3 class="card-title">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                <circle cx="12" cy="12" r="9"></circle>
                <polyline points="12,7 12,12 15,15"></polyline>
            </svg>
            {{ 'app.ui.wallet_transactions'|trans }}
        </h3>
    </div>
    {% if transactions|length > 0 %}
        <div class="table-responsive">
            <table class="table card-table table-vcenter">
                <thead>
                    <tr>
                        <th>{{ 'sylius.ui.id'|trans }}</th>
                        <th>{{ 'sylius.ui.type'|trans }}</th>
                        <th>{{ 'sylius.ui.amount'|trans }}</th>
                        <th>{{ 'sylius.ui.reference'|trans }}</th>
                        <th>{{ 'sylius.ui.date'|trans }}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for transaction in transactions %}
                        <tr>
                            <td>#{{ transaction.id }}</td>
                            <td>
                                <span class="badge {{ transaction.type.badgeClass }}">
                                    {{ transaction.type.label }}
                                </span>
                            </td>
                            <td>{{ transaction.amount }} tokens</td>
                            <td>{{ transaction.reference ?? '-' }}</td>
                            <td>{{ transaction.createdAt|date('d/m/Y H:i') }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <div class="card-body">
            <div class="alert alert-info">{{ 'app.ui.no_transactions'|trans }}</div>
        </div>
    {% endif %}
</div>
