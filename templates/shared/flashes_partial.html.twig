<turbo-frame id="flash-messages-frame">
    {% if app.session is not null and app.session.started %}
        {% for type in ['success', 'error', 'info', 'warning'] %}
            {% for flash in app.session.flashbag.get(type) %}
                {% set header = 'sylius.ui.'~type %}
                {% set icon = 'tabler:check-circle' %}
                
                {% if type == 'error' %}
                    {% set type = 'danger' %}
                    {% set icon = 'tabler:x-circle' %}
                {% elseif type == 'warning' %}
                    {% set icon = 'tabler:alert-triangle' %}
                {% elseif type == 'info' %}
                    {% set icon = 'tabler:info-circle' %}
                {% endif %}

                <div class="alert alert-{{ type }} alert-dismissible fade show border-0 shadow my-3" role="alert" data-test-sylius-flash-message>
                    <div class="d-flex align-items-start">
                        <div class="me-3">
                            {{ ux_icon(icon, { class: 'icon icon-sm' }) }}
                        </div>
                        <div class="flex-grow-1">
                            <div class="fw-bold mb-1">{{ header|trans }}</div>
                            <div {{ sylius_test_html_attribute('flash-messages') }}>
                                {% if flash is iterable %}
                                    {{ flash.message|trans(flash.parameters, 'flashes') }}
                                {% else %}
                                    {{ flash|trans({}, 'flashes') }}
                                {% endif %}
                            </div>
                        </div>
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                </div>
            {% endfor %}
        {% endfor %}
    {% endif %}
</turbo-frame>